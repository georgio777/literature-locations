# üîÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ Timeweb Cloud –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ª–æ–∫–∞—Ü–∏–π –∏–∑ –∞–¥–º–∏–Ω–∫–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `server/init.sql` - —É–±—Ä–∞–Ω—ã –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `setup-production.sh` - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. ‚úÖ –£–ª—É—á—à–µ–Ω `deploy-production.sh` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: `check-database.sh` –∏ `fix-database.sh`

## –®–∞–≥–∏ –¥–ª—è –ø–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É Timeweb Cloud
```bash
ssh root@–í–ê–®_IP_–°–ï–†–í–ï–†–ê
cd /opt/literature-locations
```

### 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –æ—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –¥–µ–ø–ª–æ–π
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.production.yml down

# –£–¥–∞–ª–∏—Ç–µ volume —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
docker volume rm literature-locations_postgres_data

# –û—á–∏—Å—Ç–∏—Ç–µ Docker —Å–∏—Å—Ç–µ–º—É
docker system prune -a -f
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥
```bash
# –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ
chmod +x *.sh
```

### 4. –ü–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ä–∞–±–æ—á–∏–µ .env —Ñ–∞–π–ª—ã**
```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
./deploy-production.sh
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
```bash
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ .env —Ñ–∞–π–ª—ã
rm -f .env.production server/.env.production client/.env.production .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∑–∞–Ω–æ–≤–æ
./setup-production.sh

# –ó–∞—Ç–µ–º –¥–µ–ø–ª–æ–π
./deploy-production.sh
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
./check-database.sh
```

### 6. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
./fix-database.sh
```

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker-compose -f docker-compose.production.yml ps
```
–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
curl http://localhost:3001/api/locations
```
–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `[]` (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤) –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker exec -it literature-locations-postgres-1 psql -U lit_user -d literature_locations_prod

# –í psql –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
\dt  # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã
SELECT COUNT(*) FROM literature_locations;  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
\q   # –í—ã–π—Ç–∏
```

### 4. –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://–í–ê–®_IP/admin` –∏–ª–∏ `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/admin`
2. –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ª–æ–∫–∞—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–Ω–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–∞ –∫–∞—Ä—Ç–µ

## –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (Node.js)
```bash
docker-compose -f docker-compose.production.yml logs server -f
```

### –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
docker-compose -f docker-compose.production.yml logs postgres -f
```

### –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose -f docker-compose.production.yml logs -f
```

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∏–ª–∞—Å—å

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cat .env.production
cat server/.env.production
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü
```bash
docker exec -it literature-locations-postgres-1 psql -U lit_user -d literature_locations_prod -c "\d literature_locations"
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
```bash
docker exec -it literature-locations-postgres-1 psql -U lit_user -d literature_locations_prod -c "\dp"
```

### 4. –¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ë–î
```bash
docker exec -it literature-locations-postgres-1 psql -U lit_user -d literature_locations_prod

# –í psql:
INSERT INTO literature_locations (name, longitude, latitude, current_address, historical_address, author, fiction) 
VALUES ('–¢–µ—Å—Ç', 37.6156, 55.7522, '–¢–µ—Å—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å', '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å', '–¢–µ—Å—Ç–æ–≤—ã–π –∞–≤—Ç–æ—Ä', '–¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ');

SELECT * FROM literature_locations;
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
1. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: `docker-compose -f docker-compose.production.yml logs server --tail=50`
2. –õ–æ–≥–∏ PostgreSQL: `docker-compose -f docker-compose.production.yml logs postgres --tail=50`
3. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏: `./check-database.sh`
4. –°–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)